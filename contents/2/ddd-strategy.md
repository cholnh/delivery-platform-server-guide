# DDD 간단 소개

<br/><br/>



## :speech_balloon: 개요
마이크로 서비스를 어떻게 도출할까?  
그리고 MSA 와 DDD 는 어떤 연관이 있을까?  

<br/>

마이크로 서비스는 다른 서비스와 의존하지 않게 독립적인 형태로 도출되어야 합니다.  
다음 두 도출 방식이 있습니다.
- 비즈니스 능력에 근거한 도출
- DDD 의 바운디드 컨텍스트 기반 도출

<br/><br/>

### 비즈니스 능력에 근거한 도출
마이크로 서비스를 식별하는 가장 쉬운 방법은 경험적인 원칙을 적용하는 것입니다.  
각 도메인에서는 비즈니스가 규정하는 일하는 방식과 조직, 부서 체계가 이미 정의돼 있고, 
이러한 부서는 이미 업무 처리에서의 응집성을 지니며 타 부서와 의존도는 낮을 것입니다.  

> 업무 기능 분해 : 비즈니스 부서가 가진 역할, 처리 능력을 체계적으로 분해

업무 기능을 분해하고 수행하는 일들을 체계적으로 정렬하면 특정 부서가 처리하는 업무 역할과 비슷해집니다.
이를 기반으로 직관적으로 서비스를 식별할 수 있습니다.  

|<img src="https://github.com/cholnh/delivery-platform-server-guide/blob/main/assets/images/2/ddd-strategy-1.png" width="700"/>|
|-|
|그림 1 - 비즈니스 능력에 의해 도출한 마이크로 서비스 ([출처](https://engineering-skcc.github.io/microservice%20modeling/microservice-%EB%8F%84%EC%B6%9C%EA%B8%B0%EB%B2%95/))|

이 방식은 전체적인 대략의 비즈니스를 이해할 때는 유용합니다.  
하지만 서비스 간의 관계 파악, 서비스의 구체 기능과 연관된 서비스가 관리할 독립적인 데이터를 식별하기에는 미흡합니다.

<br/><br/>

### DDD 의 바운디드 컨텍스트 기반 도출
마이크로 서비스는 각 저장소를 독립적으로 보유하고 다른 서비스의 데이터를 직접 참조해서는 안됩니다.  
따라서 마이크로 서비스를 도출할 때 소유권을 가진 데이터를 독립적으로 식별하는 것이 중요합니다.  
(서비스가 보유한 기능에 의해서만 접근 가능한(캡슐화) 데이터를 파악해야 합니다)  

<br/>

DDD 는 데이터를 기능과 분리해서 식별하지 않고 문제 영역인 하위 도메인마다 별도의 도메인 모델로 정의합니다.  
(분리된 도메인 모델에 의해 다른 컨텍스트와 구별되는 경계를 바운디드 컨텍스트라 합니다)  
이러한 특성이 독립적인 팀이 자율적으로 마이크로 서비스를 개발 및 운영하는 MSA 개념과 매우 잘 어울립니다.  

|<img src="https://github.com/cholnh/delivery-platform-server-guide/blob/main/assets/images/2/ddd-strategy-2.png" width="700"/>|
|-|
|그림 2 - 바운디드 컨텍스트를 통해 식별한 마이크로 서비스 ([출처](https://engineering-skcc.github.io/microservice%20modeling/microservice-%EB%8F%84%EC%B6%9C%EA%B8%B0%EB%B2%95/))|

<br/><br/>

### DDD 설계
DDD 전략적 설계에서는 비즈니스 응집성이 있는 컨텍스트를 구분하고, 이를 바운디드 컨텍스트라 하는데 이 단위가 
마이크로 서비스를 식별하기 위한 훌륭한 단위가 될 수 있습니다. 또한 전략적 설계를 통해 식별된 마이크로 서비스의 내부 
구조를 정의하고 상세히 설계하기 위해 DDD 의 객체 설계 기법인 전술적 설계를 사용할 수 있습니다.

<br/><br/>

### 전략적 설계
- 도메인과 서브도메인  

<br/>

- 유비쿼터스 언어  

<br/>

- 도메인 모델  

<br/>

- 바운디드 컨텍스트  

<br/>

- 컨텍스트 매핑  

<br/>

- 컨텍스트 맵  
